# HuayuDigdig

## 介绍
基于学号系统的矿工游戏，力图创造一个较为合理而有趣的经济系统。

## 软件架构
使用ORM将用户数据存入sqlite数据表或mysql数据库中。

通过go-cqhttp协议制作QQ机器人与用户进行交互。

## 基本机制
### 学号与兑换
每个玩家都有<a href="https://hywiki.xyz/wiki/%E5%8D%8E%E8%82%B2%E5%AD%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F">学号</a>，有多种形式，如三位、五位和六位。

游戏的基础商品是正整数，又叫“矿石”。矿石可以被兑换成等面值的钱，但是不同玩家能进行的兑换是先天决定的。简而言之，玩家只能兑换面值是自己“学号”因数的矿石。这导致玩家必然需要互通有无、互惠互利。再加上一些其他的机制，这意味着玩家会倾向于组成越来越复杂的贸易网络。

### 矿井
矿石可以从矿井获得。游戏初始有若干公用矿井，每隔一定固定时间（如一个小时）就会刷新。

随着每一个点击并开采成功的人，开采成功的概率就会不断降低（模拟劳动力的边际效应递减）。这通过每一个矿井保持一个“丰度”值实现，开采成功会导致丰度下降，而开采失败不会。开采水平更高，丰度的下降也越小。

比如，有一个玩家的科技提供70%的开采水平，但是前面已经有两个开采水平分别为50%，60%的人从当前矿井成功开采，那么该玩家成功开采的概率将只有21%。提升科技水平可以增加这种尾矿提取能力。

完成一定资本积累后，应当可以开辟私有矿井。私有矿井还可以进行售卖、出租、出售许可等行为。矿井有两种形式：均匀分布和对数均匀分布。对数均匀分布中，出较小数字的概率会较高。而均匀分布则相对来说更容易得到大数。要注意到，学号的范围是有限的，因此均匀分布也会导致出现很多“无效矿石”，这些矿石是过大的质数，没有人有能力处理，有可能只能销毁。

矿井是否应该有地理概念待定。如果加入空间系统，那么可以是一个正整数晶格，并加入运费系统。

### 加工
游戏中主要有三种加工矿石的方法：分解、合成和复制。

加工工序同时需要耗费时间和金钱。加工用时间在游戏中可以抽象为“产能点数”。
产能点数随时间而产生，产生的速率受到工业单位数量和科技水平的影响。
消耗一定量的产能点数相当于用于产生这些产能点数的时间被安排来进行指定的加工工序了。
暂且假定每分钟一个工业单位产出1个产能点数，那么一小时就产出60个。

目前，分解、合成、开辟新矿井、建设新工业单位都需要消耗产能点数。
分解、合成产能消耗分别与分解原数和合成产物对数成正比，假定一个工业单位一分钟可以分解一个2，那么产能点数消耗就相当于$\log_2 n$。

#### 分解
分解就是将矿石分成两个因数，能让本身不能被利用的矿石得以被玩家利用。
分解所消耗的金钱与分解出的较小的因数的对数成正比。
这代表从一个大石头上敲下来一块小的相对容易，而将其均匀辟成两半则很昂贵（不能分解出1）。
初始分解费相当于$e\ln(\min\{x,n/x\})$。随科技水平提高，e的指数可以从1逐渐减小，分解费降低。
可以发现，分解较小的因数卖钱是很低效的，系统奖励对大因数的保留和售卖。
#### 合成
合成就是将两个或者更多因数乘成一个大数。能让收益较小的小因数产生更大的收益，
相对地，合成费与产物的对数成正比。初始合成费相当于$e \ln n$。
#### 复制
复制一个矿石是一种非常特殊的操作，类似于“农业”，给了一种特殊途径来提供材料,并不应该成为“主流”的玩法。

复制矿石需要至少一个目标矿石参与生产。所需产能和目标矿石的面值成正比，为n/2。（一个工业单位一分钟才能复制出一个2），而所需金钱等于矿石面值。当然，科技可以降低成本，所以会出现“凭空生成矿石”的情况，但这应该是少见的。

游戏鼓励专精化。每一类操作都有一个“生产效率”数值，初始底值为0.5。连续执行同类操作（比如一直进行分解）会促成生产效率提高。
在同一类任务上连续花费60个产能单位，效率间隙就会减半。因此，对于连续花费了x个产能单位的操作来说，其生产效率为$1-2^{-1-\frac{x}{60}}$。
实际产能消耗等于基础值除以当前的生产效率。
一旦切换任务，那么该效率又会按同样速率衰减，直到回落到地板。
科技水平可以提高生成效率饱和速率，降低效率衰减速率，提高底值高度。

### 矿石市场
